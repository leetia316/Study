{"version":3,"file":"my-single-spa.js","sources":["../../src/applications/apps.helper.js","../../src/start.js","../../src/applications/timeouts.js","../../src/lifecycles/helper.js","../../src/lifecycles/load.js","../../src/lifecycles/bootstrap.js","../../src/lifecycles/unmount.js","../../src/lifecycles/mount.js","../../src/navigation/hijackLocations.js","../../src/navigation/invoke.js","../../src/applications/apps.js"],"sourcesContent":["export const NOT_LOADED = {\n  status: 'NOT_LOADED',\n}\nexport const LOAD_SOURCE_CODE = {\n  status: 'LOAD_SOURCE_CODE',\n}\nexport const NOT_BOOTSTRAPPED = {\n  status: 'NOT_BOOTSTRAPPED',\n}\nexport const BOOTSTRAPPING = {\n  status: 'BOOTSTRAPPING',\n}\nexport const NOT_MOUNTED = {\n  status: 'NOT_MOUNTED',\n}\nexport const MOUNTING = {\n  status: 'MOUNTING',\n}\nexport const MOUNTED = {\n  status: 'MOUNTED',\n}\nexport const UNMOUNTING = {\n  status: 'UNMOUNTING',\n}\nexport const UPDATING = {\n  status: 'UPDATING',\n}\nexport const SKIP_BECAUSE_BROKEN = {\n  status: 'SKIP_BECAUSE_BROKEN',\n}\nexport const LOAD_ERROR = {\n  status: 'LOAD_ERROR',\n}\n\nexport function noSkip(app) {\n  return app.status !== SKIP_BECAUSE_BROKEN;\n}\n\nexport function noLoadError(app) {\n  return app.status !== LOAD_ERROR;\n}\n\nexport function isLoaded(app) {\n  return app.status !== NOT_LOADED && app.status !== SKIP_BECAUSE_BROKEN && app.status !== LOAD_ERROR;\n}\n\nexport function isntLoaded(app) {\n  return !isLoaded(app);\n}\n\nexport function shouldBeActive(app) {\n  try {\n    return app.activityWhen(window.location);\n  } catch (e) {\n    app.status = SKIP_BECAUSE_BROKEN;\n    console.log(e);\n  }\n}\n\nexport function shouldntBeActive(app) {\n  try {\n    return !app.activityWhen(window.location);\n  } catch (e) {\n    app.status = SKIP_BECAUSE_BROKEN;\n    console.log(e);\n  }\n}\n\nexport function isActive(app) {\n  return app.status === MOUNTED;\n}\n\nexport function isntActive(app) {\n  return !isActive(app);\n}\n","import { invoke } from './navigation/invoke';\n\nlet started = false;\n\nexport function start() {\n  if (started) {\n    return;\n  }\n  started = true;\n  console.log('my-single-spa start');\n  return invoke();\n}\n\nexport function isStarted() {\n  return started;\n}","const TIMEOUTS = {\n  bootstrap: {\n    milliseconds: 3000,\n    rejectWhenTimeout: false,\n  },\n  mount: {\n    milliseconds: 3000,\n    rejectWhenTimeout: false,\n  },\n  unmount: {\n    milliseconds: 3000,\n    rejectWhenTimeout: false,\n  },\n};\n\nexport function reasonableTime(lifecyclePromise, description, timeout) {\n  return new Promise((resolve, reject) => {\n    let finished = false;\n    lifecyclePromise.then((data) => {\n      finished = true;\n      resolve(data);\n    }).catch(e => {\n      finished = true;\n      reject(e);\n    });\n\n    setTimeout(() => {\n      if (finished) {\n        return;\n      }\n      if (timeout.rejectWhenTimeout) {\n        reject(`${description}`);\n      } else {\n        console.log('timeout but waiting');\n      }\n    }, timeout.milliseconds);\n  })\n}\n\nexport function ensureTimeout(timeouts = {}) {\n  return {\n    ...TIMEOUTS,\n    ...timeouts,\n  };\n}","export function smellLikePromise(promise) {\n  if (promise instanceof Promise) {\n    return true;\n  }\n  return (typeof promise === 'object' &&\n    typeof promise.then === 'function' &&\n    typeof promise.catch === 'function');\n}\n\nexport function flattenLifecyclesArray(lifecycle, description) {\n  if (!Array.isArray(lifecycle)) {\n    lifecycle = [lifecycle];\n  }\n  if (!lifecycle.length) {\n    lifecycle = [() => Promise.resolve()];\n  }\n\n  return props => new Promise((resolve, reject) => {\n    function waitForPromises(index) {\n      let fn = lifecycle[index](props);\n      if (!smellLikePromise(fn)) {\n        reject(new Error(`${description} has error`));\n      } else {\n        fn.then(() => {\n          if (index >= lifecycle.length - 1) {\n            resolve();\n          } else {\n            waitForPromises(++index);\n          }\n        }).catch(reject);\n      }\n    }\n    waitForPromises(0);\n  })\n}\n\nexport function getProps(app) {\n  return {\n    name: app.name,\n    ...app.customProps,\n  };\n}\n","import {\n  NOT_LOADED,\n  LOAD_SOURCE_CODE,\n  SKIP_BECAUSE_BROKEN,\n  NOT_BOOTSTRAPPED,\n  LOAD_ERROR\n} from '../applications/apps.helper';\nimport { ensureTimeout } from '../applications/timeouts';\nimport {\n  smellLikePromise,\n  flattenLifecyclesArray,\n  getProps\n} from './helper';\n\nexport function toLoadPromise(app) {\n  if (app.status !== NOT_LOADED) {\n    return Promise.resolve(app);\n  }\n  app.status = LOAD_SOURCE_CODE;\n\n  let loadPromise = app.loadFunction(getProps(app));\n\n  if (!smellLikePromise(loadPromise)) {\n    app.status = SKIP_BECAUSE_BROKEN;\n    return Promise.reject(new Error(''));\n  }\n  return loadPromise.then(appConfig => {\n    if (typeof appConfig !== 'object') {\n      throw new Error('loadPromise must return a promise or thennable object');\n    }\n    let errors = [];\n    [\n      'bootstrap',\n      'mount',\n      'unmount',\n    ].forEach(lifecycle => {\n      if (!appConfig[lifecycle]) {\n        errors.push(`lifecycle: ${lifecycle} must be exists`);\n      }\n    });\n\n    if (errors.length) {\n      app.status = SKIP_BECAUSE_BROKEN;\n      console.log(errors);\n      return app;\n    }\n\n    app.status = NOT_BOOTSTRAPPED;\n    app.bootstrap = flattenLifecyclesArray(appConfig.bootstrap, `app: ${app.name} bootstrapping`);\n    app.mount = flattenLifecyclesArray(appConfig.mount, `app: ${app.name} mounting`);\n    app.unmount = flattenLifecyclesArray(appConfig.unmount, `app: ${app.name} unmounting`);\n    app.timeouts = ensureTimeout(appConfig.timeouts);\n    return app;\n  }).catch(e => {\n    app.status = LOAD_ERROR;\n    console.log(e);\n  });\n}","import { BOOTSTRAPPING, NOT_BOOTSTRAPPED, NOT_MOUNTED, SKIP_BECAUSE_BROKEN } from '../applications/apps.helper';\nimport { reasonableTime } from '../applications/timeouts';\nimport { getProps } from './helper';\n\nexport function toBootstrapPromise(app) {\n  if (app.status !== NOT_BOOTSTRAPPED) {\n    return Promise.resolve(app);\n  }\n  app.status = BOOTSTRAPPING;\n\n  return reasonableTime(app.bootstrap(getProps(app)),\n    `app: ${app.name} bootstrapping`,\n    app.timeouts.bootstrap)\n    .then(() => {\n      app.status = NOT_MOUNTED;\n      return app;\n    })\n    .catch(e => {\n      app.status = SKIP_BECAUSE_BROKEN;\n      console.log(\"toBootstrapPromise -> e\", e);\n      return app;\n    });\n}","import { MOUNTED, NOT_MOUNTED, SKIP_BECAUSE_BROKEN, UNMOUNTING } from \"../applications/apps.helper\";\nimport { reasonableTime } from \"../applications/timeouts\";\nimport { getProps } from \"./helper\";\n\nexport function toUnmountPromise(app) {\n  if (app.status !== MOUNTED) {\n    return Promise.resolve(app);\n  }\n\n  app.status = UNMOUNTING;  \n  return reasonableTime(app.unmount(getProps(app)),\n    `app: ${app.name} unmounting`,\n    app.timeouts.unmount)\n    .then(() => {\n      app.status = NOT_MOUNTED;\n      return app;\n    })\n    .catch(e => {\n      console.log(\"toUnmountPromise -> e\", e);\n      app.status = SKIP_BECAUSE_BROKEN;\n      return app;\n    });\n}","import { MOUNTED, MOUNTING, NOT_MOUNTED } from \"../applications/apps.helper\";\nimport { reasonableTime } from \"../applications/timeouts\";\nimport { getProps } from \"./helper\";\nimport { toUnmountPromise } from \"./unmount\";\n\nexport function toMountPromise(app) {\n  if (app.status !== NOT_MOUNTED) {\n    return Promise.resolve(app);\n  }\n  app.status = MOUNTING;\n\n  return reasonableTime(app.mount(getProps(app)),\n    `app: ${app.name} mounting`,\n    app.timeouts.mount)\n    .then(() => {\n      app.status = MOUNTED;\n      return app;\n    })\n    .catch(e => {\n      console.log(\"toMountPromise -> e\", e);\n      // 如果app 挂载失败，那么立即执行 unmount 操作\n      app.status = MOUNTED;\n      // toUnmountPromise\n      return toUnmountPromise(app);\n    });\n}","import { invoke } from './invoke.js';\n\nconst HIJACK_EVENTS_NAME = /^(hashchange|popstate)$/i;\nconst EVENTS_POOL = {\n  hashchange: [],\n  popstate: [],\n};\nfunction reroute() {\n  invoke([], arguments);\n}\nwindow.addEventListener('hashchange', reroute);\nwindow.addEventListener('popstate', reroute);\n\nconst originalAddEventListener = window.addEventListener;\nconst originalRemoveEventListener = window.removeEventListener;\n\nwindow.addEventListener = function (eventName, handler) {\n  if (eventName && HIJACK_EVENTS_NAME.test(eventName)) {\n    EVENTS_POOL[eventName].indexOf(handler) === -1 &&\n      EVENTS_POOL[eventName].push(handler);\n  } else {\n    originalAddEventListener.apply(this, arguments);\n  }\n};\n\nwindow.removeEventListener = function (eventName, handler) {\n  if (eventName && HIJACK_EVENTS_NAME.test(eventName)) {\n    let events = EVENTS_POOL[eventName];\n    events.indexOf(handler) > -1 &&\n      (EVENTS_POOL[eventName] = events.filter(fn => fn !== handler));\n  } else {\n    originalRemoveEventListener.apply(this, arguments);\n  }\n};\n\nfunction mockPopStateEvent(state) {\n  return new PopStateEvent('popstate', {state});\n}\n\nconst originalPushState = window.history.pushState;\nconst originalReplaceState = window.history.replaceState;\nwindow.history.pushState = function (state, title, url) {\n  let result = originalPushState.apply(this, arguments);\n  reroute(mockPopStateEvent(state));\n  return result;\n};\n\nwindow.history.replaceState = function (state, title, url) {\n  let result = originalReplaceState.apply(this, arguments);\n  reroute(mockPopStateEvent(state));\n  return result;\n};\n\nexport function callCapturedEvents(eventsArgs) {\n  if (!eventsArgs) {\n    return;\n  }\n  if (!Array.isArray(eventsArgs)) {\n    eventsArgs = [eventsArgs];\n  }\n  let name = eventsArgs[0].type;\n  if (!EVENTS_POOL[name] || EVENTS_POOL[name].length === 0) {\n    return;\n  }\n  EVENTS_POOL[name].forEach(handler => {\n    handler.apply(null, eventsArgs);\n  });\n}","import { isStarted } from '../start';\nimport {\n  getAppsToLoad,\n  getAppsToMount,\n  getAppsToUnmount,\n  getMountedApps\n} from '../applications/apps';\nimport { toLoadPromise } from '../lifecycles/load.js';\nimport { toBootstrapPromise } from '../lifecycles/bootstrap.js';\nimport { toMountPromise } from '../lifecycles/mount.js';\nimport { toUnmountPromise } from '../lifecycles/unmount.js';\nimport { callCapturedEvents } from './hijackLocations.js';\n\nlet appChangesUnderway = false;\nlet changesQueue = [];\n\nexport function invoke(pendings = [], eventArgs) {\n  if (appChangesUnderway) {\n    return new Promise((resolve, reject) => {\n      changesQueue.push({\n        success: resolve,\n        failure: reject,\n        eventArgs,\n      });\n    });\n  }\n  appChangesUnderway = true;\n  if (isStarted()) { // 系统已启动，切换页面，需要先卸载之前的app\n    return performAppChanges();\n  }\n  // 系统未启动，只加载APP（按需预加载）\n  return loadApps();\n\n  function loadApps() {\n    let loadPromises = getAppsToLoad().map(toLoadPromise);\n    // 获取需要被load的app\n    return Promise.all(loadPromises).then(() => {\n      callAllCapturedEvents();\n      return finish();\n    }).catch(e => {\n      callAllCapturedEvents();\n      console.log(\"loadApps -> e\", e);\n    });\n  }\n\n  function performAppChanges() {\n    // getAppsToUnmount\n    let unmountApps = getAppsToUnmount();\n    let unmountPromises = Promise.all(unmountApps.map(toUnmountPromise));\n    // getAppsToLoad\n    let loadApps = getAppsToLoad();\n    let loadPromises = loadApps.map(app => {\n      return toLoadPromise(app).then(toBootstrapPromise)\n        .then(() => unmountPromises).then(() => toMountPromise(app));\n    });\n\n    // will mount app\n    let mountApps = getAppsToMount().filter(app => loadApps.indexOf(app) === -1);\n    let mountPromises = mountApps.map(app => {\n      return toBootstrapPromise(app).then(() => unmountPromises).then(() => toMountPromise(app));\n    })\n\n    return unmountPromises.then(() => {\n      callAllCapturedEvents();\n      let loadAndMountPromises = loadPromises.concat(mountPromises);\n      return Promise.all(loadAndMountPromises).then(finish).catch(ex => {\n        pendings.forEach(item => item.failure(ex));\n      });\n    }).catch(e => {\n      callAllCapturedEvents();\n      console.log(\"performAppChanges -> e\", e);\n      throw e;\n    });\n  }\n\n  function finish() {\n    let returnValue = getMountedApps();\n    if (pendings.length) {\n      pendings.forEach(item => item.success(returnValue));\n    }\n    appChangesUnderway = false;\n    if (changesQueue.length) {\n      let backup = changesQueue;\n      changesQueue = [];\n      return invoke(backup);\n    }\n    return returnValue;\n  }\n\n  function callAllCapturedEvents() {\n    pendings && pendings.length && pendings.filter(item => item.eventArgs).forEach(item => callCapturedEvents(item.eventArgs));\n    eventArgs && callCapturedEvents(eventArgs);\n  }\n}","import {\n  NOT_LOADED,\n  noSkip,\n  noLoadError,\n  isntLoaded,\n  shouldBeActive,\n  isActive,\n  shouldntBeActive,\n  isLoaded,\n  isntActive,\n} from './apps.helper';\nimport { invoke } from '../navigation/invoke.js';\n\nconst APPS = [];\n\n/**\n * 注册app\n * @param {string} appName - 要注册的app的名称\n * @param {Function<Promise> | Object} loadFunction - app异步加载函数或app内容\n * @param {Function<boolean>} activityWhen - 判断该app应该在何时被启动\n * @param {Object} customProps - 自定义配置\n * @returns {Promise}\n */\nexport function registerApplication(appName, loadFunction, activityWhen, customProps = {}) {\n  if (!appName || typeof appName !== 'string') {\n    throw new Error('appName must be a non-empty string');\n  }\n  if (!loadFunction) {\n    throw new Error('loadFunction must bu a function or object');\n  }\n  if (typeof loadFunction !== 'function') {\n    loadFunction = () => Promise.resolve(loadFunction);\n  }\n  if (typeof activityWhen !== 'function') {\n    throw new Error('activityWhen must be a function');\n  }\n\n  APPS.push({\n    name: appName,\n    loadFunction,\n    activityWhen,\n    customProps,\n    status: NOT_LOADED,\n  });\n  console.log(\"registerApplication -> APPS\", APPS);\n  invoke();\n}\n\nexport function getAppsToLoad() {\n  return APPS.filter(noSkip).filter(noLoadError).filter(isntLoaded).filter(shouldBeActive);\n}\n\nexport function getAppsToUnmount() {\n  return APPS.filter(noSkip).filter(isActive).filter(shouldntBeActive);\n}\n\nexport function getAppsToMount() {\n  // 没有中断，已经加载过的，没有被mount的，应该被mount\n  return APPS.filter(noSkip).filter(isLoaded).filter(isntActive).filter(shouldBeActive);\n}\n\n// 获取当前已经被挂载的app\nexport function getMountedApps() {\n  return APPS.filter(isActive);\n}"],"names":["NOT_LOADED","status","LOAD_SOURCE_CODE","NOT_BOOTSTRAPPED","BOOTSTRAPPING","NOT_MOUNTED","MOUNTING","MOUNTED","UNMOUNTING","SKIP_BECAUSE_BROKEN","LOAD_ERROR","noSkip","app","noLoadError","isLoaded","isntLoaded","shouldBeActive","activityWhen","window","location","e","console","log","shouldntBeActive","isActive","isntActive","started","start","invoke","isStarted","TIMEOUTS","bootstrap","milliseconds","rejectWhenTimeout","mount","unmount","reasonableTime","lifecyclePromise","description","timeout","Promise","resolve","reject","finished","then","data","catch","setTimeout","ensureTimeout","timeouts","smellLikePromise","promise","flattenLifecyclesArray","lifecycle","Array","isArray","length","props","waitForPromises","index","fn","Error","getProps","name","customProps","toLoadPromise","loadPromise","loadFunction","appConfig","errors","forEach","push","toBootstrapPromise","toUnmountPromise","toMountPromise","HIJACK_EVENTS_NAME","EVENTS_POOL","hashchange","popstate","reroute","arguments","addEventListener","originalAddEventListener","originalRemoveEventListener","removeEventListener","eventName","handler","test","indexOf","apply","events","filter","mockPopStateEvent","state","PopStateEvent","originalPushState","history","pushState","originalReplaceState","replaceState","title","url","result","callCapturedEvents","eventsArgs","type","appChangesUnderway","changesQueue","pendings","eventArgs","success","failure","performAppChanges","loadApps","loadPromises","getAppsToLoad","map","all","callAllCapturedEvents","finish","unmountApps","getAppsToUnmount","unmountPromises","mountApps","getAppsToMount","mountPromises","loadAndMountPromises","concat","ex","item","returnValue","getMountedApps","backup","APPS","registerApplication","appName"],"mappings":"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"}