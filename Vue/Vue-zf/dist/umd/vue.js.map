{"version":3,"file":"vue.js","sources":["../../src/observer/array.js","../../src/utils.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parse.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/global-api/index.js","../../src/index.js"],"sourcesContent":["// 获取数组原型上的方法\r\nlet oldArrayProtoMethods = Array.prototype\r\n\r\n// 继承方法\r\nexport let arrayMethods = Object.create(oldArrayProtoMethods)\r\n\r\nlet methods = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'reverse',\r\n  'sort',\r\n  'split'\r\n]\r\n\r\nmethods.forEach(methods => {\r\n  arrayMethods[methods] = function (...args) {\r\n    console.log('数组方法被调用了')\r\n    const result = oldArrayProtoMethods[methods].apply(this, args)\r\n    let inserted\r\n    let ob = this.__ob__\r\n\r\n    switch (methods) {\r\n    case 'push':\r\n    case 'unshift':\r\n      inserted = args\r\n      break\r\n    case 'slice':\r\n      inserted = args.slice(2)\r\n      break\r\n    default: break\r\n    }\r\n\r\n    if (inserted) ob.observeArray(inserted)\r\n\r\n    return result\r\n  }\r\n})","/* eslint-disable no-prototype-builtins */\r\nexport function proxy(vm, data, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[data][key]\r\n    },\r\n    set(newValue) {\r\n      vm[data][key] = newValue\r\n    }\r\n  })\r\n}\r\n\r\nexport function defineProperty(target, key, value) {\r\n  Object.defineProperty(target, key, {\r\n    enumerable: false,\r\n    configurable: false,\r\n    value\r\n  })\r\n}\r\n\r\nexport const LIFECYCLE_HOOKS = [\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestory',\r\n  'destoryed'\r\n]\r\n\r\nconst strats = {}\r\nstrats.data = function (parentVal, childVal) {\r\n  return childVal\r\n}\r\nstrats.computed = function () { }\r\nstrats.watch = function () { }\r\nfunction mergeHook(parentVal, childVal) {\r\n  if (childVal) {\r\n    if (parentVal) {\r\n      return parentVal.concat(childVal)\r\n    }\r\n    return [childVal]\r\n  }\r\n  // 没有儿子, 不合并\r\n  return parentVal\r\n}\r\n\r\nLIFECYCLE_HOOKS.forEach(hook => {\r\n  strats[hook] = mergeHook\r\n})\r\n\r\nexport function mergeOptions(parent, child) {\r\n  const options = {}\r\n\r\n  for (let key in parent) { // 父亲和儿子都有的\r\n    mergeField(key)\r\n  }\r\n\r\n  for (let key in child) { // 父亲没有儿子有\r\n    if (!parent.hasOwnProperty(key)) {\r\n      mergeField(key)\r\n    }\r\n  }\r\n\r\n  function mergeField(key) { // 合并字段\r\n    if (strats[key]) {\r\n      options[key] = strats[key](parent[key], child[key])\r\n    } else {\r\n      // 默认合并\r\n      options[key] = child[key]\r\n    }\r\n  }\r\n\r\n  return options\r\n}","import { arrayMethods } from './array'\r\nimport { defineProperty } from '../utils'\r\n\r\n/**\r\n * 劫持对象\r\n * @param {object} data\r\n * @param {*} key\r\n * @param {*} value\r\n */\r\nfunction defineReactive(data, key, value) {\r\n  observe(value) // 递归劫持\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      return value\r\n    },\r\n    set(newValue) {\r\n      if (newValue == value) return\r\n      observe(newValue) // 如果新值是个对象也要拦截\r\n      value = newValue\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 封装对属性进行观测的类\r\n */\r\nclass Observer {\r\n  constructor(value) {\r\n    // 判断一个对象是否被观测过可以查看有没有没 __ob__\r\n    defineProperty(value, '__ob__', this)\r\n\r\n    // 使用 defineProperty 重新定义属性\r\n    if (Array.isArray(value)) { // 数组函数劫持(切片编程)\r\n      Object.setPrototypeOf(value, arrayMethods)\r\n      this.observeArray(value) // 观测数组中的对象类型\r\n    } else { // 对象属性劫持\r\n      this.walk(value)\r\n    }\r\n  }\r\n  observeArray(value) {\r\n    value.forEach(item => observe(item))\r\n  }\r\n  walk(data) {\r\n    let keys = Object.keys(data)\r\n    keys.forEach(key => {\r\n      // 定义成响应数据\r\n      defineReactive(data, key, data[key])\r\n    })\r\n  }\r\n}\r\n\r\nexport function observe(data) {\r\n  if (typeof data !== 'object' && data !== null) { // 确保必须是对象\r\n    return data\r\n  }\r\n  if (data.__ob__) {\r\n    return data\r\n  }\r\n  return new Observer(data)\r\n}","import { observe } from './observer/index'\r\nimport { proxy } from './utils'\r\n\r\nfunction initProps() {}\r\nfunction initMethods() {}\r\nfunction initData(vm) {\r\n  let data = vm.$options.data\r\n  vm._data = data = typeof data == 'function' ? data.call(vm) : data\r\n\r\n  // 将data的属性代理到vm上\r\n  for (let key in data) {\r\n    proxy(vm, '_data', key)\r\n  }\r\n\r\n  // 数据的劫持方案 Object.defineProperty 对象处理\r\n  observe(data)\r\n}\r\nfunction initComputed() {}\r\nfunction initWatch() {}\r\n\r\n/**\r\n * 初始化状态 - 数据劫持\r\n * @param {object} vm - Vue实例\r\n */\r\nexport function initState(vm) {\r\n  const opts = vm.$options\r\n  if (opts.props) {\r\n    initProps(vm)\r\n  }\r\n  if (opts.methods) {\r\n    initMethods(vm)\r\n  }\r\n  if (opts.data) {\r\n    initData(vm)\r\n  }\r\n  if (opts.computed) {\r\n    initComputed(vm)\r\n  }\r\n  if (opts.watch) {\r\n    initWatch(vm)\r\n  }\r\n}\r\n","/* eslint-disable no-useless-escape */\r\nconst ncname = '[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*'\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`) // 匹配标签结尾的 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/ // 匹配属性的\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\r\n\r\n/**\r\n * 解析HTML为抽象语法树(AST)\r\n * @param {string} html\r\n */\r\nexport function parseHTML(html) {\r\n  function createASTElement(tagName, attrs) {\r\n    return {\r\n      tag: tagName,\r\n      type: 1,\r\n      children: [],\r\n      attrs,\r\n      parent: null\r\n    }\r\n  }\r\n\r\n  let root\r\n  let currentParent\r\n  let stack = []\r\n  function start(tagName, attrs) {\r\n    let element = createASTElement(tagName, attrs)\r\n    if (!root) {\r\n      root = element\r\n    }\r\n    currentParent = element // 保存当前解析的标签\r\n    stack.push(element) // 将生成的ast元素放到栈中\r\n  }\r\n  function end(tagName) {\r\n    let element = stack.pop() // 取出栈中的最后一个\r\n    currentParent = stack[stack.length - 1]\r\n    if (currentParent) { // 在闭合时可以知道该标签的父节点\r\n      // 解决ast父子关系\r\n      element.parent = currentParent\r\n      currentParent.children.push(element)\r\n    }\r\n  }\r\n  function chars(text) {\r\n    // text = text.replace(/\\s/g, '') // 删除空字符串\r\n    if (text) {\r\n      currentParent.children.push({\r\n        type: 3,\r\n        text\r\n      })\r\n    }\r\n  }\r\n\r\n  while (html) {\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd == 0) { // 处理标签\r\n      const startTagMatch = parseStartTag() // 开始标签匹配的结果\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n      const endTagMatch = html.match(endTag)\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length)\r\n        end(endTagMatch[1]) // 将结束标签传入\r\n        continue\r\n      }\r\n    }\r\n    let text\r\n    if (textEnd > 0) { // 处理文本\r\n      // 截取文本\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      advance(text.length)\r\n      chars(text)\r\n    }\r\n  }\r\n  function advance(n) { // 截取剩余字符串\r\n    html = html.substring(n)\r\n  }\r\n  function parseStartTag() { // 解析标签头\r\n    const start = html.match(startTagOpen)\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      advance(start[0].length) // 删除开始标签\r\n      let end\r\n      let attr\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5]\r\n        })\r\n        advance(attr[0].length)\r\n      }\r\n      if (end) {\r\n        advance(end[0].length)\r\n        return match\r\n      }\r\n    }\r\n  }\r\n\r\n  return root\r\n}\r\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n// FROM: <div id=\"app\" style=\"color:red\"> hello {{name}} <span>hello</span></div>\r\n\r\n// TO: render() {\r\n//   return _c('div', {id: 'app', style: {color: 'red'}}, _v('hello' + _s(name)), _c('span', null, _v('hello')))\r\n// }\r\n\r\n/**\r\n * 解析标签属性\r\n * @param {object} attrs\r\n */\r\nfunction genProps(attrs) {\r\n  let str = ''\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i]\r\n    if (attr.name === 'style') {\r\n      let obj = {}\r\n      attr.value.split(';').forEach(item => {\r\n        let [key, value] = item.split(':')\r\n        obj[key] = value\r\n      })\r\n      attr.value = obj\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0, -1)}}`\r\n}\r\n\r\n/**\r\n * 解析子节点\r\n * @param {object} node - 子节点\r\n */\r\nfunction gen(node) {\r\n  if (node.type == 1) { // 如果是元素节点\r\n    return generate(node)\r\n  }\r\n  let text = node.text // 获取文本\r\n  // 如果是普通文本 不带{{}}\r\n  if (!defaultTagRE.test(text)) {\r\n    return `_v(${JSON.stringify(text)})`\r\n  }\r\n  let tokens = []\r\n  let lastIndex = defaultTagRE.lastIndex = 0 // 重置正则匹配\r\n  let match, index\r\n\r\n  while (match = defaultTagRE.exec(text)) {\r\n    index = match.index\r\n    if (index > lastIndex) {\r\n      tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n    }\r\n    tokens.push(`_s(${match[1].trim()})`)\r\n    lastIndex = index + match[0].length\r\n  }\r\n  if (lastIndex < text.length) {\r\n    tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n  }\r\n  return `_v(${tokens.join('+')})`\r\n}\r\n\r\n/**\r\n * 拼接子节点\r\n * @param {object} el - ASTNode\r\n */\r\nfunction genChildren(el) {\r\n  const children = el.children\r\n  if (children) { // 将所有转化后的子节点用逗号拼接\r\n    return children.map(child => gen(child)).join(',')\r\n  }\r\n}\r\n\r\n/**\r\n * 解析AST为render返回值\r\n * @param {object} el - ASTNode\r\n */\r\nexport function generate(el) {\r\n  let children = genChildren(el) // 子节点的生成\r\n  let code = `_c('${el.tag}', ${\r\n    el.attrs.length ? `${genProps(el.attrs)}` : 'undefined'\r\n  }${\r\n    children ? `,${children}`: ''\r\n  })`\r\n\r\n  return code\r\n}","import { parseHTML } from './parse'\r\nimport { generate } from './generate'\r\n\r\n/**\r\n * 将HTML模板解析成render函数\r\n * @param {*} template - HTML模板\r\n */\r\nexport function compileToFunctions(template) {\r\n  // 将模板解析成ast树\r\n  let ast = parseHTML(template)\r\n  // 1. 通过ast生成代码\r\n\r\n  // 2. 优化静态节点\r\n\r\n  // 3. 通过AST树 生成代码\r\n  let code = generate(ast)\r\n\r\n  //4 . 将字符串变成函数\r\n  let render = new Function(`with (this) { return ${code} }`)\r\n  return render\r\n}\r\n","export function patch(oldVnode, vnode) {\r\n  // 将虚拟节点转化成真实节点\r\n  let el = createElm(vnode)\r\n  let parentElm = oldVnode.parentNode\r\n  parentElm.insertBefore(el, oldVnode.nextSibling)\r\n  parentElm.removeChild(oldVnode)\r\n}\r\n\r\n/**\r\n * 根据虚拟dom创建真实节点\r\n * @param {object} vnode - 虚拟dom\r\n */\r\nfunction createElm(vnode) {\r\n  let {tag, children, key, data, text} = vnode\r\n  if (typeof tag == 'string') {\r\n    vnode.el = document.createElement(tag)\r\n\r\n    // 更新属性\r\n    updateProperties(vnode)\r\n\r\n    children.forEach(child => {\r\n      vnode.el.appendChild(createElm(child))\r\n    })\r\n  } else {\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n  return vnode.el\r\n}\r\n\r\nfunction updateProperties(vnode) {\r\n  let el = vnode.el\r\n  let newProps = vnode.data || {}\r\n\r\n  for (let key in newProps) {\r\n    if (key === 'style') {\r\n      for (let styleName in newProps.style) {\r\n        el.style[styleName] = newProps.style[styleName]\r\n      }\r\n    } else if (key === 'class') {\r\n      el.className = el.class\r\n    } else {\r\n      el.setAttribute(key, newProps[key])\r\n    }\r\n  }\r\n}","import { patch } from './vdom/patch'\r\n\r\n/**\r\n * Vue生命周期扩展\r\n * @param {object} Vue - Vue 实例\r\n */\r\nexport function lifecycleMixin(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this\r\n    patch(vm.$el, vnode)\r\n  }\r\n}\r\n\r\n/**\r\n * 挂载Vue组件\r\n * @param {object} vm - Vue 实例\r\n * @param {string} el - 挂载点\r\n */\r\nexport function mountComponent(vm, el) {\r\n  // 调用render方法去渲染 el 属性\r\n\r\n  callHook(vm, 'beforeMount')\r\n  // 先调用 render 方法创建虚拟节点，再将虚拟节点渲染到页面上\r\n  vm._update(vm._render())\r\n  callHook(vm, 'mounted')\r\n}\r\n\r\n/**\r\n * 调用生命周期钩子\r\n * @param {object} vm - Vue 实例\r\n * @param {string} hook - 钩子名称\r\n */\r\nexport function callHook(vm, hook) {\r\n  const handlers = vm.$options[hook]\r\n  if (handlers) {\r\n    for (let i = 0, len = handlers.length; i < len; i++) {\r\n      handlers[i].call(vm)\r\n    }\r\n  }\r\n}","import { initState } from './state'\r\nimport { compileToFunctions } from './compiler/index'\r\nimport { mountComponent, callHook } from './lifecycle'\r\nimport { mergeOptions } from './utils'\r\n\r\n/**\r\n * Vue初始化功能扩展插件\r\n * @param {object} Vue - Vue构造函数\r\n */\r\nexport function initMixin(Vue) {\r\n  /**\r\n   * 初始化方法\r\n   * @param {object} options\r\n   */\r\n  Vue.prototype._init = function (options) {\r\n    const vm = this\r\n    vm.$options = mergeOptions(vm.constructor.options, options)\r\n\r\n    callHook(vm, 'beforeCreate')\r\n    // 初始化状态(数据劫持，当数据改变时更新视图)\r\n    initState(vm)\r\n    callHook(vm, 'created')\r\n\r\n    // 如果当前有el属性说明要渲染模板\r\n    if (vm.$options.el) {\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 挂载节点方法\r\n   * @param {string} params - 挂载点\r\n   */\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this\r\n    const options = vm.$options\r\n    // 获取挂载节点\r\n    el = document.querySelector(el)\r\n    vm.$el = el\r\n\r\n    // 判断有没有render方法\r\n    if (!options.render) { // 无render\r\n      // 将template转换成render方法\r\n\r\n      let template = options.template\r\n      if (!template && el) { // 无template\r\n        // 使用挂载点作为模板\r\n        template = el.outerHTML\r\n      }\r\n      // 编译原理 将模板编译成render函数\r\n      const render = compileToFunctions(template)\r\n      options.render = render\r\n    }\r\n    // 有render(用户写的或者是使用模板编译出来的)\r\n\r\n    // 挂载组件\r\n    mountComponent(vm, el)\r\n\r\n  }\r\n}","/**\r\n * Vue渲染的扩展\r\n * @param {object} Vue - Vue 实例\r\n */\r\nexport function renderMixin(Vue) {\r\n  Vue.prototype._c = function () { // 创建虚拟dom元素\r\n    return createElement(...arguments)\r\n  }\r\n  Vue.prototype._s = function (val) { // 获取插值内容并转化为字符串\r\n    return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val\r\n  }\r\n  Vue.prototype._v = function (text) { // 创建虚拟dom文本元素\r\n    return createTextVnode(text)\r\n  }\r\n  Vue.prototype._render = function () { // _render = render\r\n    const vm = this\r\n    const render = vm.$options.render\r\n    let vnode = render.call(vm)\r\n\r\n    return vnode\r\n  }\r\n}\r\n\r\nfunction createElement(tag, data = {}, ...children) {\r\n  return vnode(tag, data, data.key, children)\r\n}\r\n\r\nfunction createTextVnode(text) {\r\n  return vnode(undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\n/**\r\n * 生成虚拟dom\r\n * 对AST的扩展, 产生虚拟dom\r\n * @param {string} [ tag ] - 标签\r\n * @param {object} [ data ] - 标签属性对象\r\n * @param {string} [ key ] - 节点 key 值\r\n * @param {Array} [ children ] - 子节点\r\n * @param {string} [ text ] - 文本内容\r\n */\r\nfunction vnode(tag, data, key, children, text) {\r\n  return {\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text\r\n  }\r\n}","import { mergeOptions } from '../utils'\r\n\r\nexport function initGlobalApi(Vue) {\r\n  Vue.options = {}\r\n  Vue.mixin = function (mixin) {\r\n    this.options = mergeOptions(this.options, mixin)\r\n  }\r\n}","import { initMixin } from './init'\r\nimport { lifecycleMixin } from './lifecycle'\r\nimport { renderMixin } from './vdom/index'\r\nimport { initGlobalApi } from './global-api/index'\r\n\r\n/**\r\n * Vue 构造函数\r\n * @param {*} options\r\n */\r\nfunction Vue(options) {\r\n  this._init(options) // 组件初始化入口\r\n}\r\n\r\n/**\r\n * 通过插件的方式将Vue的初始化方法扩展到Vue原型上\r\n */\r\n// 扩展了初始化功能\r\ninitMixin(Vue) // _init\r\n// 扩展了生命周期相关(更新 + 挂载)\r\nlifecycleMixin(Vue) // _update\r\n// 扩展了Vue的渲染方法\r\nrenderMixin(Vue) // _render\r\n\r\n/**\r\n * 静态方法 Vue.component Vue.directive Vue.extend Vue.mixin\r\n */\r\ninitGlobalApi(Vue)\r\n\r\nexport default Vue"],"names":["oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","console","log","args","result","apply","inserted","ob","__ob__","slice","observeArray","proxy","vm","data","key","defineProperty","get","set","newValue","target","value","enumerable","configurable","LIFECYCLE_HOOKS","strats","parentVal","childVal","computed","watch","mergeHook","concat","hook","mergeOptions","parent","child","options","mergeField","hasOwnProperty","defineReactive","observe","Observer","isArray","setPrototypeOf","walk","item","keys","initData","$options","_data","call","initState","opts","props","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tagName","attrs","tag","type","children","root","currentParent","stack","start","element","push","end","pop","length","chars","text","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","i","obj","split","JSON","stringify","gen","node","generate","test","tokens","lastIndex","index","exec","trim","join","genChildren","el","map","code","compileToFunctions","template","ast","render","Function","patch","oldVnode","vnode","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","Vue","_update","$el","mountComponent","callHook","_render","handlers","len","initMixin","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","arguments","_s","val","_v","createTextVnode","undefined","initGlobalApi","mixin"],"mappings":"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"}